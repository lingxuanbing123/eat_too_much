<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>商家</title>
</head>
<body>
    我是商家
    <button id="cart" onclick="cart()">购物车</button>
    <div id="good">

    </div>
<script>
    function addGood(id) {
        console.log(id);
    }
    function cart() {
        location.href = "cart.html";
    }
    fetch('/info').then(res=>res.json())
        .then(res=>{
            console.log(res);
        })
        .catch(e=>{console.error(e)
            location.href = '/login.html'
        })
    fetch('/business/getInfo').then(res=>res.json())
        .then(res=>{
            console.log(res);
        })
        .catch(e=>{
            console.error(e)
        })
    fetch('/good/info').then(res=>res.json())
        .then(res=>{
            console.log(res);
             const goodDiv = document.getElementById("good")

             res.forEach(item=>{
                 goodDiv.innerHTML += `
             <div style="padding-bottom: 5px;color: #666;border-bottom: 1px solid #ccc"><span>${item.goodName}</span>
             <span style="margin-left: 30px">${item.goodPrice}</span>
             <span style="margin-left: 30px"><button id="business0" onclick="addGood(${item.goodId})">+</button></span>
             </div>
             `
             })
        })
        .catch(e=>{
            console.error(e)
            //location.href = '/login.html'
        })


</script>



</body>
</html>